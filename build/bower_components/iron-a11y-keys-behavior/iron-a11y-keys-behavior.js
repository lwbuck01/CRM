!function(){"use strict";function a(a){var b="";if(a){var c=a.toLowerCase();1==c.length?k.test(c)&&(b=c):b=m.test(c)?c.replace("arrow",""):n.test(c)?"space":"multiply"==c?"*":c}return b}function b(a){var b="";return a&&(b=l.test(a)?h[a]:a.toLowerCase()),b}function c(a){var b="";return Number(a)&&(b=a>=65&&a<=90?String.fromCharCode(32+a):a>=112&&a<=123?"f"+(a-112):a>=48&&a<=57?String(48-a):a>=96&&a<=105?String(96-a):i[a]),b}function d(d){return a(d.key)||b(d.keyIdentifier)||c(d.keyCode)||a(d.detail.key)||""}function e(a,b){return d(b)===a.key&&!!b.shiftKey==!!a.shiftKey&&!!b.ctrlKey==!!a.ctrlKey&&!!b.altKey==!!a.altKey&&!!b.metaKey==!!a.metaKey}function f(a){return a.split("+").reduce(function(a,b){var c=b.split(":"),d=c[0],e=c[1];return d in j?a[j[d]]=!0:(a.key=d,a.event=e||"keydown"),a},{combo:a.split(":").shift()})}function g(a){return a.split(" ").map(function(a){return f(a)})}var h={"U+0009":"tab","U+001B":"esc","U+0020":"space","U+002A":"*","U+0030":"0","U+0031":"1","U+0032":"2","U+0033":"3","U+0034":"4","U+0035":"5","U+0036":"6","U+0037":"7","U+0038":"8","U+0039":"9","U+0041":"a","U+0042":"b","U+0043":"c","U+0044":"d","U+0045":"e","U+0046":"f","U+0047":"g","U+0048":"h","U+0049":"i","U+004A":"j","U+004B":"k","U+004C":"l","U+004D":"m","U+004E":"n","U+004F":"o","U+0050":"p","U+0051":"q","U+0052":"r","U+0053":"s","U+0054":"t","U+0055":"u","U+0056":"v","U+0057":"w","U+0058":"x","U+0059":"y","U+005A":"z","U+007F":"del"},i={9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},j={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},k=/[a-z0-9*]/,l=/U\+/,m=/^arrow/,n=/^space(bar)?/;Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},_boundKeyHandlers:{value:function(){return[]}},_imperativeKeyBindings:{value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,b){var c,d=g(b);for(c=0;c<d.length;++c)if(e(d[c],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});return a.indexOf(this.keyBindings)===-1&&a.push(this.keyBindings),a},_prepKeyBindings:function(){this._keyBindings={},this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this);for(var a in this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a])},_addKeyBinding:function(a,b){g(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[],this._keyBindings[a.event].push([a,b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){Object.keys(this._keyBindings).forEach(function(a){var b=this._keyBindings[a],c=this._onKeyBindingEvent.bind(this,b);this._boundKeyHandlers.push([this.keyEventTarget,a,c]),this.keyEventTarget.addEventListener(a,c)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c,d;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),b=a[0],c=a[1],d=a[2],b.removeEventListener(c,d)},_onKeyBindingEvent:function(a,b){a.forEach(function(a){var c=a[0],d=a[1];!b.defaultPrevented&&e(c,b)&&this._triggerKeyHandler(c,d,b)},this)},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c,this[b].call(this,new CustomEvent(a.event,{detail:d}))}}}();