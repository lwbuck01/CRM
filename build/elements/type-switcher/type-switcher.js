/*
 * Original can be found at https://github.com/SanderRonde/CustomRightClickMenu 
 * This code may only be used under the MIT style license found in the LICENSE.txt file 
**/
"use strict";var TS=function(){function a(){}return a.ready=function(){(this.isScript="script"===this.type)?(this.isLink=this.isMenu=this.isDivider=this.isStylesheet=!1,this.remainingTypes=["link","divider","menu","stylesheet"]):(this.isLink="link"===this.type)?(this.isMenu=this.isDivider=this.isStylesheet=!1,this.remainingTypes=["script","divider","menu","stylesheet"]):(this.isStylesheet="stylesheet"===this.type)?(this.isDivider=this.isMenu=!1,this.remainingTypes=["link","script","divider","menu"]):(this.isMenu="menu"===this.type)?(this.isDivider=!1,this.remainingTypes=["link","script","divider","stylesheet"]):(this.isDivider=!0,this.remainingTypes=["link","script","menu","stylesheet"]),this.$.typeTxt.innerHTML=this.type},a.colorTypeChoices=function(){$(this).find(".typeSwitchChoice").each(function(){$(this).attr("type",$(this).children()[0].innerHTML)})},a.closeTypeSwitchContainer=function(a,b){void 0===a&&(a=!1);var c=this;$(this.parentNode.parentNode).stop().animate({height:50},{easing:"easeInCubic",duration:a?80:300,complete:function(){c.$.typeSwitchChoicesContainer.style.display="none",c.$.typeSwitchArrow.style.transform="rotate(180deg)",b&&b()}})},a.openTypeSwitchContainer=function(){this.colored||(this.colorTypeChoices(),this.colored=!0),this.$.typeSwitchChoicesContainer.style.display="block",this.$.typeSwitchArrow.style.transform="rotate(90deg)",$(this.parentNode.parentNode).stop().animate({height:250},{easing:"easeOutCubic",duration:300})},a.toggleTypeSwitch=function(){this.toggledOpen?this.closeTypeSwitchContainer():this.openTypeSwitchContainer(),this.toggledOpen=!this.toggledOpen},a.shadowColumns=function(a,b){$(a).find("#itemCont").animate({opacity:b?1:.5}).each(function(){this.parentElement.shadow=!0});var c=$(a).next()[0];c&&this.async(function(){this.shadowColumns(c,b)},150)},a.matchesTypeScheme=function(a,b){switch(a){case"link":if(Array.isArray(b)){var c=!0;if(b.forEach(function(a){("object"!=typeof a||Array.isArray(a))&&(c=!1)}),c)return!0}break;case"script":case"stylesheet":return"object"==typeof b&&!Array.isArray(b);case"divider":case"menu":return null===b}return!1},a.changeType=function(a){function b(a){for(k.hide(),f.children=f.menuVal,delete f.menuVal,f.type="menu",f.value=null,e.type=g,e.calculateType(),d.ready(),i=0;i<d.remainingTypes.length;i++)j[i].setAttribute("type",d.remainingTypes[i]);d.shadowColumns(a,!0),window.app.shadowStart=null}window.app.editCRM.cancelAdding();var c,d=this;c="string"==typeof a?a:"SPAN"===a.path[0].tagName?a.path[0].innerHTML:a.path[0].children[0].innerHTML;var e=this.parentElement.parentElement.parentElement,f=e.item,g=f.type;if("menu"===g?(f.menuVal=f.children,delete f.children):f[g+"Val"]=f.value,f.type=c,"menu"===c&&(f.children=[]),f[c+"Val"]&&this.matchesTypeScheme(c,f[c+"Val"]))f.value=f[c+"Val"];else{var h=void 0;switch(f.type){case"link":f.triggers=f.triggers||[{url:"*://*.example.com/*",not:!1}],f.value=[{url:"https://www.example.com",newTab:!0}];break;case"script":h=h||f.triggers||[{url:"*://*.example.com/*",not:!1}],f.value=window.app.templates.getDefaultScriptValue();break;case"divider":f.value=null,f.triggers=f.triggers||[{url:"*://*.example.com/*",not:!1}];break;case"menu":f.value=null,f.triggers=f.triggers||[{url:"*://*.example.com/*",not:!1}];break;case"stylesheet":h=h||f.triggers||[{url:"*://*.example.com/*",not:!1}],f.value=window.app.templates.getDefaultStylesheetValue()}}e.type=f.type,e.calculateType(),this.ready();var i,j=$(this).find(".typeSwitchChoice").toArray();for(i=0;i<this.remainingTypes.length;i++)j[i].setAttribute("type",this.remainingTypes[i]);var k=$("#changedToMenuToast");if("menu"===g){var l=this.parentElement.parentElement.parentElement.parentElement,m=l.parentElement.parentElement;m=$(m).next()[0],this.shadowColumns(m,!1),window.app.shadowStart=l.index+1,k.on("click",function(){b(m)}),k[0].show(),setTimeout(function(){k.off("click",function(){b(m)})},1e4)}this.closeTypeSwitchContainer(!0),window.app.upload()},a}();TS.is="type-switcher",TS.isLink=!1,TS.isScript=!1,TS.isDivider=!1,TS.isMenu=!1,TS.isStylesheet=!1,TS.remainingTypes=[],TS.toggledOpen=!1,TS.colored=!1,Polymer(TS);