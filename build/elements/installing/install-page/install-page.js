/*
 * Original can be found at https://github.com/SanderRonde/CustomRightClickMenu 
 * This code may only be used under the MIT style license found in the LICENSE.txt file 
**/
"use strict";var installPageProperties={fetchFailed:{type:Boolean,value:!1,notify:!0},fetchCompleted:{type:Boolean,value:!1,notify:!0},fetchedData:{type:String,value:"",notify:!0},userscriptUrlCalculated:{type:Boolean,notify:!1,value:!1},userscriptUrl:{type:String,computed:"getUserscriptUrl(userscriptUrlCalculated)"},isLoading:{type:Boolean,value:!1,notify:!0,computed:"isPageLoading(fetchFailed, fetchCompleted)"}},IP=function(){function a(){}return a.isPageLoading=function(a,b){return!a&&!b},a.getInstallSource=function(){var a=this.getSearchParams(location.href);return a.s},a.getSearchParams=function(a){for(var b=a.split("?").slice(1).join("?"),c=b.split("&").map(function(a){var b=a.split("=");return{key:b[0],val:decodeURIComponent(b[1])}}),d={},e=0;e<c.length;e++)d[c[e].key]=c[e].val;return d},a.getUserscriptUrl=function(){this.userscriptUrlCalculated=!0;var a=this.getSearchParams(location.href);return a.i},a.displayFetchedUserscript=function(a){this.fetchCompleted=!0,this.fetchedData=a},a.notifyFetchError=function(){this.fetchFailed=!0},a.fetchUserscript=function(a){var b=this;$.ajax({url:a+"?noInstall",dataType:"text"}).done(function(a){b.displayFetchedUserscript(a)}).fail(function(){b.notifyFetchError()})},a.ready=function(){this.userscriptUrl=this.getUserscriptUrl(),this.$.title.innerHTML="Installing userscript from "+this.userscriptUrl,this.fetchUserscript(this.userscriptUrl),window.installPage=this},a}();IP.is="install-page",IP.properties=installPageProperties,Polymer(IP);